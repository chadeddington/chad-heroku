{"version":3,"sources":["logo.svg","components/Searchbar.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","Searchbar","_ref","search","thisYear","Date","getFullYear","_React$useState","React","useState","getMonth","_React$useState2","Object","slicedToArray","month","setMonth","_React$useState3","_React$useState4","year","setYear","inputStyles","height","padding","boxSizing","margin","borderRadius","fontSize","textAlign","react_default","a","createElement","onChange","e","target","value","style","objectSpread","map","i","type","placeholder","width","onClick","App","state","googlePhotos","signIn","searchDate","_this","GOOGLE_AUTH","then","auth_token","currentUser","get","getAuthResponse","access_token","listMedia","requestOut","filters","dateFilter","dates","config","method","body","JSON","stringify","fetch","concat","res","json","data","console","log","setState","mediaItems","catch","err","func","wait","timeout","context","this","args","arguments","callNow","clearTimeout","setTimeout","apply","_this2","window","gapi","load","client","init","clientId","scope","auth2","getAuthInstance","dateObj","date","getDate","weekday","getDay","monthDays","offset","dayArray","Array","fill","className","length","photo","day","mediaMetadata","creationTime","match","Number","backgroundImage","baseUrl","components_Searchbar","drawCalendar","href","productUrl","rel","key","src","alt","filename","Component","Boolean","location","hostname","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.b1e1cbae.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";","import React from 'react';\n\nfunction Searchbar({search}) {\n  const thisYear = new Date().getFullYear();\n  const [month, setMonth] = React.useState(new Date().getMonth() + 1);\n  const [year, setYear] = React.useState(thisYear);\n\n  const handleMonth = (e) => {\n    setMonth(e.target.value);\n  }\n\n  const handleYear = (e) => {\n    // TODO: Validate Year\n    setYear(e.target.value)\n  }\n\n  const handleClick = (e) => {\n    search({month, year})\n  }\n\n  const months = [\n    'January',\n    'February',\n    'March',\n    'April',\n    'May',\n    'June',\n    'July',\n    'August',\n    'September',\n    'October',\n    'November',\n    'December'\n  ]\n\n  const inputStyles = {\n    height: 35,\n    padding: 0,\n    boxSizing: \"content-box\",\n    margin: 5,\n    borderRadius: 4,\n    fontSize: 18,\n    textAlign: 'center'\n  }\n  return (\n    <div>\n      <select onChange={handleMonth} style={{...inputStyles}} value={month}>\n        {months.map( (month, i) => <option value={i + 1}>{month}</option>)}\n      </select>\n\n      <input type=\"text\" placeholder={new Date().getFullYear()} onChange={handleYear} style={{...inputStyles, width: 100}}/>\n\n      <button onClick={handleClick} style={{...inputStyles, padding: \"0 10\"}}>Get Photos</button>\n    </div>\n  )\n}\n\nexport default Searchbar;","import React, { Component } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport Searchbar from './components/Searchbar.js';\n\nclass App extends Component {\n  state = {googlePhotos: [], month: new Date().getMonth() + 1, year: new Date().getFullYear()}\n\n  debounce(func, wait) {\n    let timeout;\n    // return a function to be called as the event handler\n    return function() {\n      let context = this\n      let args = arguments;\n\n      let later = function() {\n        timeout = null;\n        func.apply(context, args);\n      }\n\n      let callNow = !timeout;\n\n      clearTimeout(timeout);\n      timeout = setTimeout(later, wait);\n\n      if (callNow) func.apply(context, args);\n    }\n  }\n\n  componentDidMount() {\n    if (window.gapi) {\n      // Google Auth API\n      window.gapi.load('client:auth2', () => {\n        window.gapi.client.init({\n          'clientId': '1073743336431-k4mr9nfbtl1f4e83ml13pjbitftu2kpg.apps.googleusercontent.com',\n          'scope': 'https://www.googleapis.com/auth/photoslibrary.readonly',\n        }).then( () =>{\n            this.GOOGLE_AUTH = window.gapi.auth2.getAuthInstance();\n            console.log(\"Google initialized successfully! Good Job!\", this.GOOGLE_AUTH)\n        }).catch(function(err) {\n            console.log(\"There was an error initializing google\", err);\n        });\n      });\n    }\n\n    // fetch('/express-backend').then(res => {\n    //   res.json().then(data => {\n    //     console.log('testing: ', data);\n    //   }).catch(err => {\n    //     console.log(err)\n    //   })\n    // })\n  }\n\n  signIn = (searchDate) => {\n    this.GOOGLE_AUTH.signIn().then(e => {\n      this.auth_token = this.GOOGLE_AUTH.currentUser.get().getAuthResponse().access_token;\n      // this.listAlbums();\n      this.listMedia(searchDate);\n    });\n  }\n\n  listMedia = ({month, year}) => {\n    if (this.requestOut) return; //prevent duplicate requests\n    this.requestOut = true;\n    const filters = {\n      filters: {\n        dateFilter: {\n          dates: [\n            {\n              month,\n              year\n            }\n          ]\n        }\n      }\n    }\n    const config = {\n      method: 'POST',\n      body: JSON.stringify(filters)\n    }\n    fetch(`https://photoslibrary.googleapis.com/v1/mediaItems:search?access_token=${this.auth_token}&pageSize=100`, config)\n      .then(res => res.json().then(data => {\n        console.log(data)\n        // Month does not come in 0 based\n        this.setState(state => ({googlePhotos: data.mediaItems, month: month, year})); \n        this.requestOut = false; // Allow new requests to be made\n      }))\n      .catch(err => {\n        console.log(err);\n      })\n  }\n\n  drawCalendar() {\n    // month needs to be 0 based\n    let dateObj = new Date(this.state.year, this.state.month - 1);\n    let date = dateObj.getDate();\n    let weekday = dateObj.getDay()\n    const monthDays = new Date(this.state.year, this.state.month, 0).getDate();\n\n    while (date > 1) {\n      if (weekday > 0) {\n        weekday-- ;\n      } else {\n        weekday = 6;\n      }\n      date--;\n    }\n    var offset = weekday;\n    let dayArray = Array(42).fill(<div className=\"day\"></div>);\n\n    // Add empty days to beginning and end of calendar array\n    dayArray.fill(<div className=\"day empty\"></div>, 0, offset);\n    dayArray.fill(<div className=\"day empty\"></div>, monthDays + offset);\n\n    if (this.state.googlePhotos) {\n      // this.organizePhotos(dayArray, offset)\n      // this.state.googlePhotos.map( (photo) => {\n      // let day = photo.mediaMetadata.creationTime.match(/(\\d+)/g)[2]\n      // })\n\n      for (let i = 0; i < this.state.googlePhotos.length; i++) {\n        let photo = this.state.googlePhotos[i];\n        let day = photo.mediaMetadata.creationTime.match(/(\\d+)/g)[2];\n        dayArray[Number(day) + offset] = <div className=\"day\" style={{backgroundImage: `url(${photo.baseUrl})`}}></div>\n      }\n      \n    }\n\n    return dayArray\n  }\n\n  render() {\n    const months = [\n      'January',\n      'February',\n      'March',\n      'April',\n      'May',\n      'June',\n      'July',\n      'August',\n      'September',\n      'October',\n      'November',\n      'December'\n    ]\n\n    return (\n      <div className=\"App\">\n        <div className=\"header\">\n          <h1>Image Calendar</h1>\n        </div>\n\n        <Searchbar search={this.signIn}/>\n        <div className=\"google-logo-container\">Powered by <span className=\"googleLogo\"></span></div>\n\n        <h1>{`${months[this.state.month - 1]} ${this.state.year}`}</h1>\n        <div>\n          {this.drawCalendar()}\n        </div>\n\n        <div className=\"photo-wrapper\">\n        {\n          (this.state.googlePhotos) ? this.state.googlePhotos.map((photo, i) => (\n            <div>\n              <a href={photo.productUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n                <img className=\"image\" key={i} src={photo.baseUrl} alt={photo.filename}></img>\n              </a>\n            </div>\n            )\n          ) : ''\n        }\n        </div>\n\n        \n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}