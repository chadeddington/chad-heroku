(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{167:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(17),r=a.n(i),c=(a(69),a(57)),l=a(58),s=a(62),u=a(59),h=a(63),m=(a(71),a(72),a(27)),g=a(13);var d=function(e){var t=e.search,a=(new Date).getFullYear(),n=o.a.useState((new Date).getMonth()+1),i=Object(g.a)(n,2),r=i[0],c=i[1],l=o.a.useState(a),s=Object(g.a)(l,2),u=s[0],h=s[1],d={height:35,padding:0,boxSizing:"content-box",margin:5,borderRadius:4,fontSize:18,textAlign:"center"};return o.a.createElement("div",null,o.a.createElement("select",{onChange:function(e){c(e.target.value)},style:Object(m.a)({},d),value:r},["January","February","March","April","May","June","July","August","September","October","November","December"].map(function(e,t){return o.a.createElement("option",{value:t+1},e)})),o.a.createElement("input",{type:"text",placeholder:(new Date).getFullYear(),onChange:function(e){h(e.target.value)},style:Object(m.a)({},d,{width:100})}),o.a.createElement("button",{onClick:function(e){t({month:r,year:u})},style:Object(m.a)({},d,{padding:"0 10"})},"Get Photos"))};var p=function(e){var t=e.classes,a=e.date,n=e.images,i=void 0===n?[]:n;return e.dayClick,o.a.createElement("div",{className:t,style:{backgroundImage:"url(".concat(i[0],")")},onClick:function(){var e=new CustomEvent("openDialog",{detail:{items:i}});document.dispatchEvent(e)}},a?o.a.createElement("span",{className:"cal-date"},a):null,i.length?o.a.createElement("span",{className:"image-length"},i.length):null)},f=a(60),y=a.n(f);var v=function(){var e=o.a.useState(0),t=Object(g.a)(e,2),a=t[0],n=t[1],i=o.a.useState(!1),r=Object(g.a)(i,2),c=r[0],l=r[1],s=o.a.useState([]),u=Object(g.a)(s,2),h=u[0],m=u[1];return o.a.useEffect(function(){document.addEventListener("openDialog",function(e){console.log("event fired",e.detail),l(!0),n(0),m(e.detail.items)})},[]),o.a.createElement(y.a,{open:c,onBackdropClick:function(){l(!1)},classes:{paper:"dialog-content"}},o.a.createElement("img",{src:h[a],style:{width:"100%"}}),o.a.createElement("div",{style:{display:"flex"}},o.a.createElement("button",{onClick:function(){n(0===a?h.length-1:a-1)},style:{flex:1,height:50}},"Previous"),o.a.createElement("button",{onClick:function(){a===h.length-1?n(0):n(a+1)},style:{flex:1,height:50}},"Next")))},b=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={googlePhotos:[],month:(new Date).getMonth()+1,year:(new Date).getFullYear()},a.signIn=function(e){a.GOOGLE_AUTH.signIn().then(function(t){a.auth_token=a.GOOGLE_AUTH.currentUser.get().getAuthResponse().access_token,a.listMedia(e)})},a.listMedia=function(e){var t=e.month,n=e.year;if(!a.requestOut){a.requestOut=!0;var o={filters:{dateFilter:{dates:[{month:t,year:n}]}}},i={method:"POST",body:JSON.stringify(o)};fetch("https://photoslibrary.googleapis.com/v1/mediaItems:search?access_token=".concat(a.auth_token,"&pageSize=100"),i).then(function(e){return e.json().then(function(e){console.log(e),a.setState(function(a){return{googlePhotos:e.mediaItems,month:t,year:n}}),a.requestOut=!1})}).catch(function(e){alert("There was a problem ",e)})}},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"debounce",value:function(e,t){var a;return function(){var n=this,o=arguments,i=!a;clearTimeout(a),a=setTimeout(function(){a=null,e.apply(n,o)},t),i&&e.apply(n,o)}}},{key:"componentDidMount",value:function(){var e=this;window.gapi&&window.gapi.load("client:auth2",function(){window.gapi.client.init({clientId:"1073743336431-k4mr9nfbtl1f4e83ml13pjbitftu2kpg.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/photoslibrary.readonly"}).then(function(){e.GOOGLE_AUTH=window.gapi.auth2.getAuthInstance(),console.log("Google initialized successfully! Good Job!",e.GOOGLE_AUTH)}).catch(function(e){console.log("There was an error initializing google",e)})})}},{key:"drawCalendar",value:function(){for(var e=new Date(this.state.year,this.state.month-1),t=e.getDate(),a=e.getDay(),n=new Date(this.state.year,this.state.month,0).getDate();t>1;)a>0?a--:a=6,t--;var o=a,i=Array(42).fill(null).map(function(e,t){return t<o||t>=n+o?{}:{date:t-o+1,images:[]}});return this.state.googlePhotos.length&&this.state.googlePhotos.forEach(function(e){var t=e.mediaMetadata.creationTime.match(/(\d+)/g)[2];i[Number(t)+o-1].images.push(e.baseUrl)}),i}},{key:"render",value:function(){var e=this,t=this.drawCalendar();return o.a.createElement("div",{className:"App"},o.a.createElement("div",{className:"header"},o.a.createElement("h1",null,"Image Calendar")),o.a.createElement(d,{search:this.signIn}),o.a.createElement("div",{className:"google-logo-container"},"Powered by ",o.a.createElement("span",{className:"googleLogo"})),o.a.createElement("h1",null,"".concat(["January","February","March","April","May","June","July","August","September","October","November","December"][this.state.month-1]," ").concat(this.state.year)),o.a.createElement("div",{className:"photo-wrapper"},t.map(function(t){return t.date?o.a.createElement(p,Object.assign({classes:"day"},t,{dayClick:e.dayClick})):o.a.createElement(p,{classes:"day empty",dayClick:e.dayClick})})),o.a.createElement(v,{items:this.state.viewItems,openModal:this.state.openModal}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},64:function(e,t,a){e.exports=a(167)},69:function(e,t,a){},71:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},72:function(e,t,a){}},[[64,2,1]]]);
//# sourceMappingURL=main.9c28e0d8.chunk.js.map